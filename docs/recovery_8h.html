<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kalashnikov DB: rec/recovery.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Kalashnikov DB
   &#160;<span id="projectnumber">0.9.3</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('recovery_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">recovery.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="recovery_8h__dep__incl.png" border="0" usemap="#rec_2recovery_8hdep" alt=""/></div>
<!-- MAP 0 -->
</div>
</div>
<p><a href="recovery_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0764228149712593c8af8241538a3ff7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="recovery_8h.html#a0764228149712593c8af8241538a3ff7">AK_recover_archive_log</a> (char *fileName)</td></tr>
<tr class="memdesc:a0764228149712593c8af8241538a3ff7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that reads the binary file in which last commands were saved, and executes them.  <a href="recovery_8h.html#a0764228149712593c8af8241538a3ff7">More...</a><br /></td></tr>
<tr class="separator:a0764228149712593c8af8241538a3ff7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43a7968a4c3cb7ab84da0356b0bb74f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="recovery_8h.html#a43a7968a4c3cb7ab84da0356b0bb74f7">AK_recovery_insert_row</a> (char *table, int commandNumber)</td></tr>
<tr class="memdesc:a43a7968a4c3cb7ab84da0356b0bb74f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that inserts a new row in the table with attributes.  <a href="recovery_8h.html#a43a7968a4c3cb7ab84da0356b0bb74f7">More...</a><br /></td></tr>
<tr class="separator:a43a7968a4c3cb7ab84da0356b0bb74f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94c27377e1fb404252b803979db877bc"><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="recovery_8h.html#a94c27377e1fb404252b803979db877bc">AK_recovery_tokenize</a> (char *input, char *delimiter, int valuesOrNot)</td></tr>
<tr class="memdesc:a94c27377e1fb404252b803979db877bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that tokenizes the input with the given delimiter and puts them in an double pointer structure (so we can execute an insert)  <a href="recovery_8h.html#a94c27377e1fb404252b803979db877bc">More...</a><br /></td></tr>
<tr class="separator:a94c27377e1fb404252b803979db877bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa60f3e800c0ef4ff307ac2cdfcb9ce4b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTestResult.html">TestResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="recovery_8h.html#aa60f3e800c0ef4ff307ac2cdfcb9ce4b">AK_recovery_test</a> ()</td></tr>
<tr class="memdesc:aa60f3e800c0ef4ff307ac2cdfcb9ce4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for recovery testing.  <a href="recovery_8h.html#aa60f3e800c0ef4ff307ac2cdfcb9ce4b">More...</a><br /></td></tr>
<tr class="separator:aa60f3e800c0ef4ff307ac2cdfcb9ce4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaab30d878f086d3f949315e7a84c6b4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="recovery_8h.html#aaab30d878f086d3f949315e7a84c6b4f">AK_recover_operation</a> (int sig)</td></tr>
<tr class="memdesc:aaab30d878f086d3f949315e7a84c6b4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that recovers and executes failed commands.  <a href="recovery_8h.html#aaab30d878f086d3f949315e7a84c6b4f">More...</a><br /></td></tr>
<tr class="separator:aaab30d878f086d3f949315e7a84c6b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7e36f3b39ac5ced3d135ae4d26aa073"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="recovery_8h.html#af7e36f3b39ac5ced3d135ae4d26aa073">AK_load_chosen_log</a> ()</td></tr>
<tr class="memdesc:af7e36f3b39ac5ced3d135ae4d26aa073"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the recovery operation for the chosen bin file.  <a href="recovery_8h.html#af7e36f3b39ac5ced3d135ae4d26aa073">More...</a><br /></td></tr>
<tr class="separator:af7e36f3b39ac5ced3d135ae4d26aa073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1d963b64289349145718cc25b8344c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="recovery_8h.html#ada1d963b64289349145718cc25b8344c">AK_load_latest_log</a> ()</td></tr>
<tr class="memdesc:ada1d963b64289349145718cc25b8344c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the recovery operation for the latest bin file.  <a href="recovery_8h.html#ada1d963b64289349145718cc25b8344c">More...</a><br /></td></tr>
<tr class="separator:ada1d963b64289349145718cc25b8344c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="af7e36f3b39ac5ced3d135ae4d26aa073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7e36f3b39ac5ced3d135ae4d26aa073">&#9670;&nbsp;</a></span>AK_load_chosen_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AK_load_chosen_log </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes the recovery operation for the chosen bin file. </p>
<p>Function lists the contents of the archive_log directory. The user then writes the name of the desired bin file to perform the neccessary actions. </p><dl class="section author"><dt>Author</dt><dd>Matija Večenaj </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>no value</dd></dl>
<p>Function lists the contents of the archive_log directory. The user then types in the name of the desired bin file to open and perform the neccessary actions. </p><dl class="section author"><dt>Author</dt><dd>Matija Večenaj </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>no value </dd></dl>

</div>
</div>
<a id="ada1d963b64289349145718cc25b8344c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada1d963b64289349145718cc25b8344c">&#9670;&nbsp;</a></span>AK_load_latest_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AK_load_latest_log </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes the recovery operation for the latest bin file. </p>
<p>Function reads the latest.txt file which contains the name of the latest bin file that's been created. Then it loads it and does the neccessary recovery operations. </p><dl class="section author"><dt>Author</dt><dd>Matija Večenaj </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>no value </dd></dl>

</div>
</div>
<a id="a0764228149712593c8af8241538a3ff7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0764228149712593c8af8241538a3ff7">&#9670;&nbsp;</a></span>AK_recover_archive_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AK_recover_archive_log </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that reads the binary file in which last commands were saved, and executes them. </p>
<p>Function opens the recovery binary file and executes all commands that were saved inside the redo_log structure </p><dl class="section author"><dt>Author</dt><dd>Dražen Bandić, update by Tomislav Turek </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>- name of the archive log </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>no value </dd></dl>

</div>
</div>
<a id="aaab30d878f086d3f949315e7a84c6b4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaab30d878f086d3f949315e7a84c6b4f">&#9670;&nbsp;</a></span>AK_recover_operation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AK_recover_operation </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that recovers and executes failed commands. </p>
<p>Function is called when SIGINT signal is sent to the system. All commands that are written to rec.bin file are recovered to the designated structure and then executed.</p>
<dl class="section author"><dt>Author</dt><dd>Tomislav Turek </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sig</td><td>required integer parameter for SIGINT handler functions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a43a7968a4c3cb7ab84da0356b0bb74f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43a7968a4c3cb7ab84da0356b0bb74f7">&#9670;&nbsp;</a></span>AK_recovery_insert_row()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AK_recovery_insert_row </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>commandNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that inserts a new row in the table with attributes. </p>
<p>Function is given the table name with desired data that should be inserted inside. By using the table name, function retrieves table attributes names and their types which uses afterwards for insert_data_test function to insert data to designated table.</p>
<dl class="section author"><dt>Author</dt><dd>Dražen Bandić, updated by Tomislav Turek </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>- table name to insert to </td></tr>
    <tr><td class="paramname">commandNumber</td><td>- number of current command </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>no value </dd></dl>

</div>
</div>
<a id="aa60f3e800c0ef4ff307ac2cdfcb9ce4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa60f3e800c0ef4ff307ac2cdfcb9ce4b">&#9670;&nbsp;</a></span>AK_recovery_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTestResult.html">TestResult</a> AK_recovery_test </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for recovery testing. </p>
<p>Function does nothing while waiting a SIGINT signal (signal represents // doxygen @ for full description ??? system failure). Upon retrieving the signal it calls function AK_recover_operation which starts the recovery by building commands. To comply with the designated structure <a class="el" href="structAK__command__recovery__struct.html" title="recovery structure used to recover commands from binary file">AK_command_recovery_struct</a> // {link} to struct ??? it writes dummy commands to the file log.log </p><dl class="section author"><dt>Author</dt><dd>Tomislav Turek </dd></dl>

</div>
</div>
<a id="a94c27377e1fb404252b803979db877bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94c27377e1fb404252b803979db877bc">&#9670;&nbsp;</a></span>AK_recovery_tokenize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** AK_recovery_tokenize </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>delimiter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>valuesOrNot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that tokenizes the input with the given delimiter and puts them in an double pointer structure (so we can execute an insert) </p>
<dl class="section author"><dt>Author</dt><dd>Dražen Bandić </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>- input to tokenize </td></tr>
    <tr><td class="paramname">delimiter</td><td>- delimiter </td></tr>
    <tr><td class="paramname">valuesOrNot</td><td>- 1 if the input are values, 0 otherwise </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new double pointer structure with tokens </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_47c25c331c075fe16f320299349474de.html">rec</a></li><li class="navelem"><a class="el" href="recovery_8h.html">recovery.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
